# 투포인터 알고리즘

## **투포인터 알고리즘**

투포인터 알고리즘(Two Pointers Algorithm) 또는 슬라이딩 윈도우(Sliding Window)라고 부른다. 이번에 20년도 상반기 라인 공채 코딩 테스트에서 이를 활용할 만한 문제가 나왔다. 그래서 예전에 정리했던 내용을 떠올리며, 다시 정리하려 글을 쓴다.

알고리즘 문제를 풀다 완전탐색으로 해결하면 시간 초과가 나는 문제가 종종 있다. 어떻게 풀어야 하는지 그 당시 검색했을 때, `투 포인터 알고리즘` 이 대안이었다.

> 1차원 배열이 있고, 이 배열에서 각자 다른 원소를 가리키고 있는 2개의 포인터를 조작해가면서 원하는 것을 얻는 형태이다. 이때문에 투포인터 알고리즘이라 부른다.

N칸의 1차원 배열이 있을 때, 부분 배열 중 그 원소의 합이 M이 되는 경우의 수를 구하는 것이다. 모든 경우의 수를 다 테스트 해보면 구간 합을 구간 배열로 O(1)만에 구한다고 해도 경우의 수는 O(N^2)이 된다. 따라서 문제를 풀 수 없다. N의 최대 범위가 너무 크기 때문이다.

이 문제에서 각 원소는 자연수이고 M 또한 자연수인데, 이 조건이 성립하면 사용할 수 있는 알고리즘은 다음과 같다.

- 포인터 2개를 준비한다. 시작과 끝을 알 수 있도록 start, end 라고 한다.
- 맨 처음에는 start = end = 0이며, 항상 start<=end을 만족해야 한다.
- 2개의 포인터는 현재 부분 배열의 시작과 끝을 가리키는 역할을 한다.

s=e일 경우 그건 크기가 0인, 아무것도 포함하지 않는 부분 배열을 뜻한다. 다음의 과정을 s < N인 동안 반복한다.

1. 만약 현재 부분합이 M 이상이거나, 이미 e = N이면 s++
2. 그렇지 않다면 e++
3. 현재 부분합이 M과 같으면 결과 ++

쉽게 이해하자면, start와 end 를 무조건 증가시키는 방향으로만 변화시켜가면서 도중에 부분 배열의 합이 정확히 M이 되는 경우를 세는 것이다.

Ex) M = 5인 경우를 살펴보자.

[https://camo.githubusercontent.com/385948873093a35954978d4c957d854b487e8a3a1f99c6f0f6e1d7cb6d830c03/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f35362f6b6b733232375f3134373139373637373736333164764d70655f504e472f312e706e673f747970653d7732](https://camo.githubusercontent.com/385948873093a35954978d4c957d854b487e8a3a1f99c6f0f6e1d7cb6d830c03/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f35362f6b6b733232375f3134373139373637373736333164764d70655f504e472f312e706e673f747970653d7732)

초기 상태이며, 빨간색 포인터 : start, 파란색 포인터 : end이다. S : 합.

**end**가 뒤로 움직일 때는 새로 포함한 원소를 S에 더하고, **start**가 뒤로 움직일 때는 새로 넘긴 원소를 S에서 빼는 식으로 현재 [start, end)의 합 S를 매번 쉽게 구할 수 있다.

[https://camo.githubusercontent.com/5b7e7222542b93d5273c2845557a9e5d4f4ee6beb854f4f30e8a4a6a128d8e44/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139362f6b6b733232375f31343731393736373737393632516b7336375f504e472f322e706e673f747970653d7732](https://camo.githubusercontent.com/5b7e7222542b93d5273c2845557a9e5d4f4ee6beb854f4f30e8a4a6a128d8e44/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139362f6b6b733232375f31343731393736373737393632516b7336375f504e472f322e706e673f747970653d7732)

[https://camo.githubusercontent.com/a76ff5f3449360581787294a5d3d4d4855735d4be452732d583c376e5476024f/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3237342f6b6b733232375f3134373139373637373835303853547349535f504e472f332e706e673f747970653d7732](https://camo.githubusercontent.com/a76ff5f3449360581787294a5d3d4d4855735d4be452732d583c376e5476024f/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3237342f6b6b733232375f3134373139373637373835303853547349535f504e472f332e706e673f747970653d7732)

[https://camo.githubusercontent.com/0aa7fd3f5c6ffa21897a4a9cc9b8c9d94453e73e572ad913dbfce913df7f59ce/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3131382f6b6b733232375f31343731393736373738383432486b4634485f504e472f342e706e673f747970653d7732](https://camo.githubusercontent.com/0aa7fd3f5c6ffa21897a4a9cc9b8c9d94453e73e572ad913dbfce913df7f59ce/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3131382f6b6b733232375f31343731393736373738383432486b4634485f504e472f342e706e673f747970653d7732)

처음에는 이렇게 end만 증가하게 된다. S가 계속 M보다 작기 때문! 마지막엔 S>=M이 되었으므로 아래와 같다.

[https://camo.githubusercontent.com/90b54c474181a56bea8bd6c62f6eef98085028bd558a1e5831971c8b9959b5f2/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3130312f6b6b733232375f31343731393736373739313536616f7354545f504e472f352e706e673f747970653d7732](https://camo.githubusercontent.com/90b54c474181a56bea8bd6c62f6eef98085028bd558a1e5831971c8b9959b5f2/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3130312f6b6b733232375f31343731393736373739313536616f7354545f504e472f352e706e673f747970653d7732)

start를 한 칸 옮겼는데, 동시에 S = 5인 경우를 만났다. 이때 결과를 1 증가시켜 준다.

[https://camo.githubusercontent.com/15aeba90571532823b90ebbf8f1ba99dc8d133105261ebd4b87fa659b39db60f/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3138362f6b6b733232375f313437313937363737393435367a385756505f504e472f362e706e673f747970653d7732](https://camo.githubusercontent.com/15aeba90571532823b90ebbf8f1ba99dc8d133105261ebd4b87fa659b39db60f/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3138362f6b6b733232375f313437313937363737393435367a385756505f504e472f362e706e673f747970653d7732)

[https://camo.githubusercontent.com/8909f36a8bdda10c8ac63a4ffbc5093c54c555ab8e40e2317ce4ac67f967ea10/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f312f6b6b733232375f313437313937363737393838376b6f3579775f504e472f372e706e673f747970653d7732](https://camo.githubusercontent.com/8909f36a8bdda10c8ac63a4ffbc5093c54c555ab8e40e2317ce4ac67f967ea10/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f312f6b6b733232375f313437313937363737393838376b6f3579775f504e472f372e706e673f747970653d7732)

[https://camo.githubusercontent.com/a872d3dffe2884bb55b5e7dbee46312dd28e5bf9d5f026278f8f65f159123cd3/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3236352f6b6b733232375f3134373139373637383032393150447730595f504e472f382e706e673f747970653d7732](https://camo.githubusercontent.com/a872d3dffe2884bb55b5e7dbee46312dd28e5bf9d5f026278f8f65f159123cd3/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3236352f6b6b733232375f3134373139373637383032393150447730595f504e472f382e706e673f747970653d7732)

[https://camo.githubusercontent.com/4c2800c1168a3a48281eea44471a9db941032dd1e585fe6f599171619bfc8722/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3133392f6b6b733232375f31343731393736373830363033686b7844355f504e472f392e706e673f747970653d7732](https://camo.githubusercontent.com/4c2800c1168a3a48281eea44471a9db941032dd1e585fe6f599171619bfc8722/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3133392f6b6b733232375f31343731393736373830363033686b7844355f504e472f392e706e673f747970653d7732)

[https://camo.githubusercontent.com/f889951c14e5a94d91ded2d5484633218a8ddc4fa2ff2305089855ee95b92152/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3238342f6b6b733232375f31343731393736373830383737596a5169415f504e472f31302e706e673f747970653d7732](https://camo.githubusercontent.com/f889951c14e5a94d91ded2d5484633218a8ddc4fa2ff2305089855ee95b92152/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3238342f6b6b733232375f31343731393736373830383737596a5169415f504e472f31302e706e673f747970653d7732)

[https://camo.githubusercontent.com/c8dd03b01b5d68ef70ca9381a33145b4404c919b4f421d4b57755663b8fd57f5/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3130312f6b6b733232375f3134373139373637383132313250334c69305f504e472f31312e706e673f747970653d7732](https://camo.githubusercontent.com/c8dd03b01b5d68ef70ca9381a33145b4404c919b4f421d4b57755663b8fd57f5/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3130312f6b6b733232375f3134373139373637383132313250334c69305f504e472f31312e706e673f747970653d7732)

[https://camo.githubusercontent.com/63a1bf9b031bcd4eb8f616f643b659ad3d7acad4b10c888e1c3c7ac2c81a29e6/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3138382f6b6b733232375f3134373139373637383135323532723165515f504e472f31322e706e673f747970653d7732](https://camo.githubusercontent.com/63a1bf9b031bcd4eb8f616f643b659ad3d7acad4b10c888e1c3c7ac2c81a29e6/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3138382f6b6b733232375f3134373139373637383135323532723165515f504e472f31322e706e673f747970653d7732)

이런 식으로 포인터들이 움직이게 된다. 여기서 2번째로 S = 5인 지점을 만났으므로 결과를 1 증가시켜 준다.

[https://camo.githubusercontent.com/e3268c6322d1cb3cd867a1d90229fc3cba83b2b43c335d1736436ecf71f6a519/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f38302f6b6b733232375f31343731393736373831373437356830656f5f504e472f31332e706e673f747970653d7732](https://camo.githubusercontent.com/e3268c6322d1cb3cd867a1d90229fc3cba83b2b43c335d1736436ecf71f6a519/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f38302f6b6b733232375f31343731393736373831373437356830656f5f504e472f31332e706e673f747970653d7732)

그 직후, start가 1 증가하면서 start = end인 경우가 나온다.

[https://camo.githubusercontent.com/0251828447140797d5ad1c3ad306b07cf9c676f5480799aa78fd74a325ab47f4/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3234302f6b6b733232375f3134373139373637383231303773524862765f504e472f31342e706e673f747970653d7732](https://camo.githubusercontent.com/0251828447140797d5ad1c3ad306b07cf9c676f5480799aa78fd74a325ab47f4/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3234302f6b6b733232375f3134373139373637383231303773524862765f504e472f31342e706e673f747970653d7732)

[https://camo.githubusercontent.com/96f5f5d6a21e36e5de19c8adadd1a509198ce55b34d547185f543a59621eaa8a/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3234302f6b6b733232375f3134373139373637383236343539694572515f504e472f31352e706e673f747970653d7732](https://camo.githubusercontent.com/96f5f5d6a21e36e5de19c8adadd1a509198ce55b34d547185f543a59621eaa8a/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3234302f6b6b733232375f3134373139373637383236343539694572515f504e472f31352e706e673f747970653d7732)

[https://camo.githubusercontent.com/412621124f8300fd3323d6ec8f503ceaa6ab621d7d055f975fa575fd95bba840/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139322f6b6b733232375f3134373139373637383239373752533845365f504e472f31362e706e673f747970653d7732](https://camo.githubusercontent.com/412621124f8300fd3323d6ec8f503ceaa6ab621d7d055f975fa575fd95bba840/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139322f6b6b733232375f3134373139373637383239373752533845365f504e472f31362e706e673f747970653d7732)

계속 가다 보면 세 번째로 S = 5인 지점을 만난다.

[https://camo.githubusercontent.com/5226ae66bb196a20c0a91ef54c20498604c21aa401632583f068797bff911822/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3134372f6b6b733232375f3134373139373637383332373048314261685f504e472f31372e706e673f747970653d7732](https://camo.githubusercontent.com/5226ae66bb196a20c0a91ef54c20498604c21aa401632583f068797bff911822/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3134372f6b6b733232375f3134373139373637383332373048314261685f504e472f31372e706e673f747970653d7732)

[https://camo.githubusercontent.com/62d948b99a68d4b9047b0e37e9710c42a68d2fc7479d7383ea5eb5a3550b47df/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f34342f6b6b733232375f3134373139373637383336303743344633675f504e472f31382e706e673f747970653d7732](https://camo.githubusercontent.com/62d948b99a68d4b9047b0e37e9710c42a68d2fc7479d7383ea5eb5a3550b47df/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f34342f6b6b733232375f3134373139373637383336303743344633675f504e472f31382e706e673f747970653d7732)

그 이후 조건에 맞춰 포인터를 증가시키다 보면, end가 배열 끝을 가리키게 되어 더이상 증가할 수 없는 상태가 된다.

[https://camo.githubusercontent.com/e7e7e3a6fe19ddf55d329e20073f11aaae87eb9c1330a52c33b0cf8cb8a49616/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139372f6b6b733232375f31343731393736373834303731464c7152525f504e472f31392e706e673f747970653d7732](https://camo.githubusercontent.com/e7e7e3a6fe19ddf55d329e20073f11aaae87eb9c1330a52c33b0cf8cb8a49616/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f3139372f6b6b733232375f31343731393736373834303731464c7152525f504e472f31392e706e673f747970653d7732)

[https://camo.githubusercontent.com/403a3d57d405e3e21300ad500df70009443c5ef890699816d9867c77b79303c7/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f38372f6b6b733232375f3134373139373637383435323134656d38305f504e472f32302e706e673f747970653d7732](https://camo.githubusercontent.com/403a3d57d405e3e21300ad500df70009443c5ef890699816d9867c77b79303c7/68747470733a2f2f6d626c6f677468756d622d7068696e662e707374617469632e6e65742f32303136303832345f38372f6b6b733232375f3134373139373637383435323134656d38305f504e472f32302e706e673f747970653d7732)

그렇게 되면 그냥 start만 증가시켜 가다가 start 역시 배열 끝에 다다르면 종료해도 되고, 그냥 그 자리에서 루프를 끝내버려도 된다. 이렇게 해서 S = 5인 경우는 3개 발견되었다.

- 시간 복잡도
  - 이 알고리즘은 매 루프마다 항상 두 포인터 중 하나는 1씩 증가하고 있고, 각 포인터가 N번 누적 증가해야 알고리즘이 끝난다. 따라서 각각 배열 끝에 다다르는데 O(N)이라서 합쳐도 O(N)이 된다.
- **추천 문제(백준 기준)**
  - 2003 : 수들의 합
  - 1644 : 소수의 연속합
  - 1806 : 부분합
  - 2230 : 수 고르기
  - 1484 : 다이어트
  - 2038 : 골룽 수열
  - 2531 : 회전 초밥
  - 2096 : 내려가기
  - 2293 : 동전1

## **참고**

- [투 포인터(Two Pointers Algorithm), 슬라이딩 윈도우(Sliding Window) (수정: 2019-09-09)](https://m.blog.naver.com/kks227/220795165570)
